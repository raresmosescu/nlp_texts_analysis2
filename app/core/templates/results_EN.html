{% extends 'base.html' %} {% block content %} {% load static %}

<section class="section">
  <div class="container">
     <div class="columns" style="display: flex; justify-content: center">
      <div
        class="column is-half"
        id="results-container"
      >
        <div class="column" style="text-align: center; font-size: 1.5rem">
          Results
        </div>
        {% for k,v in results %}
        <div
          class="column"
          id="main_results"
        >
          <p class="yrd">{{k}}</p>
          <p class="yrd">{{v}}</p>
        </div>
        {% endfor %}
      
      <div class="pagination" id="results-buttons">
        <a>
          <button style="width: 200px; height: 100%; white-space: normal;" class="button is-black mr-2 butoane pagination-previous" id="share" class="button is-link pagination-next">
            Copy results to clipboard
          </button>
        </a>
        <a download="text_analyzer_results.png" href="{% static 'text_analyzer_results.png' %}" title="ImageName">
          <button style="width: 200px; height: 100%; white-space: normal;" class="button mr-2 butoane pagination-previous">Download results as image</button>
        </a>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container" id="centered-container">
    <h1 class="title mt-5">What do you think about this?</h1>
    <h2 class="title is-6">Share your feedback, suggestions, any ideas about what you'd want us to continue this app...</h2>
    <form action="/" method="post" class="form">
      {% csrf_token %}
      <textarea
        class="textarea is-primary"
        placeholder="Feedback"
        name="feedback"
      ></textarea>
      <button
        id="submit"
        data-clipboard-target="#tabel"
        class="button my-2 is-link"
        type="submit"
      >
        Submit
      </button>
    </form>
  </div>
</section>

{% endblock %}
{% block scripts %}
<script>
  $(function(){
    const results = {{ json_results|safe }};

    let text = ''
    for (let i in results)
      text += `${i}: ${results[i]}\n`
    
    text += 'If u wanna try go get me a beer https//here-is-link'
    $('#share').click({}, () => {
    navigator.clipboard.writeText(text)
    })
});
</script>
{% endblock scripts %}
